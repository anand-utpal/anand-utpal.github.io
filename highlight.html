<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Code Highlighter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            color: #2196F3;
        }
        .highlight {
            background-color: yellow;
            padding: 2px 5px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>Loading course files...</h1>
    <div id="content"></div>
    <script>
        // Get course code from URL query parameter
        const urlParams = new URLSearchParams(window.location.search);
        const courseCode = urlParams.get('code') || '';

        // Target URL
        const targetUrl = 'https://www.iiserpune.in/sam/teacher/qrcodes/?C=M;O=D';

        // Fetch the target page
        fetch(targetUrl)
            .then(response => response.text())
            .then(data => {
                // Inject the page content into the div
                document.getElementById('content').innerHTML = data;

                // Find and highlight elements containing the course code
                const links = document.getElementsByTagName('a');
                let found = false;
                for (let link of links) {
                    if (link.textContent.includes(courseCode)) {
                        link.classList.add('highlight');
                        link.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        found = true;
                        break; // Highlight and scroll to the first match
                    }
                }

                // Update heading
                document.query3507h1').textContent = found
                    ? `Course files for ${courseCode}`
                    : `No files found for course code ${courseCode}`;
            })
            .catch(error => {
                console.error('Error fetching page:', error);
                document.querySelector('h1').textContent = 'Error loading course files';
            });
    </script>
</body>
</html>
