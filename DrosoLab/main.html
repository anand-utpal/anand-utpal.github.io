<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experiment Flowchart</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f4f7f9;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .flowchart-container {
            position: relative;
            width: 1000px;
            height: 900px;
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 20px;
            border: 1px solid #e0e0e0;
        }

        .box {
            position: absolute;
            padding: 15px 20px;
            border-radius: 8px;
            text-align: center;
            font-size: 14px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
            border: 1px solid transparent;
            z-index: 2;
        }

        .box ul {
            margin: 5px 0 0 0;
            padding-left: 20px;
            text-align: left;
            font-size: 13px;
        }

        .run-experiment {
            background-color: #e3f2fd;
            /* Light Blue */
            border-color: #90caf9;
            color: #1e88e5;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
        }

        .start-node {
            background-color: #e3f2fd;
            /* Light Blue */
            border-color: #90caf9;
            color: #1e88e5;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
        }

        .process {
            background-color: #d1c4e9;
            /* Light Purple */
            border-color: #b39ddb;
            color: #5e35b1;
        }

        .manual-step {
            background-color: #ffe0b2;
            /* Light Orange */
            border-color: #ffb74d;
            color: #f57c00;
        }

        .output {
            background-color: #c8e6c9;
            /* Light Green */
            border-color: #a5d6a7;
            color: #388e3c;
        }

        .app {
            background-color: #b2ebf2;
            /* Light Cyan */
            border-color: #80deea;
            color: #0097a7;
        }

        .arrow {
            position: absolute;
            background-color: #78909c;
            z-index: 1;
        }

        .arrow::after {
            content: '';
            position: absolute;
            border: solid #78909c;
            border-width: 0 2px 2px 0;
            /* Arrowhead shape */
            display: inline-block;
            padding: 3px;
            /* Smaller arrowhead size */
        }

        /* NEW STYLES FOR ALL MODIFIED ARROWS */
        #arrow1,
        #arrow2,
        #arrow3,
        #arrow4,
        #arrow5,
        #arrow6 {
            background-color: #42a5f5;
            width: 3px;
        }

        #arrow1::after,
        #arrow2::after,
        #arrow3::after,
        #arrow4::after,
        #arrow5::after,
        #arrow6::after {
            border-color: #42a5f5;
            border-width: 0 3px 3px 0;
            padding: 4px;
            left: -4px;
            bottom: -5px;
            /* --- FIX: Added rotation for the arrowhead direction --- */
            transform: rotate(45deg);
        }


        /* Vertical Down Arrow */
        .arrow.down {
            width: 2px;
        }

        .arrow.down::after {
            bottom: -4px;
            left: -3px;
            /* Centered on the 2px line */
            transform: rotate(45deg);
        }

        /* Horizontal Right Arrow */
        .arrow.right {
            height: 2px;
        }

        .arrow.right::after {
            right: -4px;
            top: -3px;
            /* Centered on the 2px line */
            transform: rotate(-45deg);
        }

        /* A simple line without an arrowhead */
        .line {
            position: absolute;
            background-color: #78909c;
            z-index: 1;
        }

        .validation-section {
            position: absolute;
            bottom: 20px;
            left: 20px;
            width: 95%;
            padding: 15px;
            background-color: #fafafa;
            border: 1px dashed #bdbdbd;
            border-radius: 10px;
        }

        .validation-section h4 {
            margin: 0 0 10px 0;
            color: #d32f2f;
        }

        .validation-section ul {
            margin: 5px 0 0 0;
            padding-left: 20px;
            font-size: 13px;
        }

        /* --- NEW MENU STYLES --- */
        .menu-container {
            position: absolute;
            top: 25px;
            left: 25px;
            z-index: 10;
        }

        .menu-icon {
            cursor: pointer;
            padding: 5px;
        }

        .menu-icon .bar {
            display: block;
            width: 25px;
            height: 3px;
            background-color: #555;
            margin: 5px 0;
        }

        .menu-content {
            display: none;
            /* Hidden by default */
            position: absolute;
            top: 100%;
            left: 0;
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 15px;
            min-width: 180px;
        }

        .menu-content h4 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #1e88e5;
        }

        .menu-content ul {
            list-style: none;
            padding: 0;
            margin: 0;
            text-align: left;
        }

        .menu-content ul li {
            padding: 8px 5px;
            font-size: 14px;
        }

        /* Show menu on hover */
        .menu-container:hover .menu-content {
            display: block;
        }
    </style>
</head>

<body>

    <div class="flowchart-container">
        <div class="menu-container">
            <div class="menu-icon">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
            <div class="menu-content">
                <h4>Contents</h4>
                <ul>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/coverpage.html">Chapter 1: Cover Page</a></li>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/main.html">Chapter 2: Framework</a></li>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/page1.html">Chapter 3: Tracking Principles</a></li>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/funtionsmain.html">Chapter 4: Experimental Interface</a></li>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/calibration.html">Chapter 5: Calibration on Image</a></li>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/htmlcalibration.html">Chapter 6: Calibration on Data</a></li>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/analysis.html">Chapter 7: Analysis</a></li>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/plottingapp.html">Chapter 8: Plotting App</a></li>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/labeledroi.html">Chapter 9: Labeling ROI</a></li>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/videomaking.html">Chapter 10: Video Making</a></li>
                    <li><a href="https://anand-utpal.github.io/DrosoLab/error%20and%20working.html">Chapter 11: Error and Working</a></li>

                </ul>
            </div>
        </div>

        <div class="box run-experiment">
            <strong>Run Experiment</strong>
        </div>

        <div class="box start-node">
            <strong>Coordinates Database in Log File</strong>
            <br><small>(Input for the experiment)</small>
        </div>

        <div class="box manual-step" style="top: 220px; left: 50px; width: 280px;">
            <strong>Use a Captured Image and Manually Draw Region of Interest (ROI)</strong>
        </div>

        <div class="box process" style="top: 220px; left: 650px; width: 280px;">
            <strong>Draw ROI on All Coordinates</strong>
        </div>

        <div class="box process" style="top: 360px; left: 50%; transform: translateX(-50%); width: 400px;">
            <strong>Process & Sort Coordinates by ROI</strong>
            <br><small>Uploads coordinate database, sorts/places data into respective ROIs.</small>
            <br><strong>Note: DAM logic is applied here.</strong>
        </div>

        <div class="box output"
            style="top: 480px; left: 50%; transform: translateX(-50%); width: 200px; height: 130px;">
            <strong>Generated Files</strong>
            <small>(Used to generate graphs & data)</small>
            <ul>
                <li>Sorted Coordinates</li>
                <li>DAM Output</li>
                <li>Locomotor Activity</li>
            </ul>
        </div>

        <div class="box app" style="top: 660px; left: 50%; transform: translateX(-50%); width: 200px;">
            <strong>Open Plotting App</strong>
            <br>Select options and plot
            <br><small><i>or use Python for plotting</i></small>
        </div>

        <div class="validation-section">
            <h4>Validation</h4>
            <ul>
                <li><b>Video Output:</b> For ground truthing.</li>
            </ul>
        </div>

        <div id="arrow1" class="arrow down" style="top: 75px; left: 50%; height: 25px;"></div>

        <div class="line"
            style="top: 155px; left: 50%; width: 3px; height: 25px; background-color: #42a5f5; transform: translateX(-1.5px);">
        </div>
        <div class="line" style="top: 180px; left: 190px; height: 3px; width: 601px; background-color: #42a5f5;"></div>
        <div id="arrow2" class="arrow down" style="top: 180px; left: 190px; height: 40px;"></div>
        <div id="arrow3" class="arrow down" style="top: 180px; left: 790px; height: 40px;"></div>

        <div class="line" style="top: 280px; left: 190px; width: 3px; height: 35px; background-color: #42a5f5;"></div>
        <div class="line" style="top: 280px; left: 790px; width: 3px; height: 35px; background-color: #42a5f5;"></div>
        <div class="line" style="top: 315px; left: 190px; height: 3px; width: 601px; background-color: #42a5f5;"></div>
        <div id="arrow4" class="arrow down" style="top: 315px; left: 50%; height: 45px;"></div>

        <div id="arrow5" class="arrow down" style="top: 440px; left: 50%; height: 40px;"></div>
        <div id="arrow6" class="arrow down" style="top: 610px; left: 50%; height: 50px;"></div>

    </div>

</body>

</html>
